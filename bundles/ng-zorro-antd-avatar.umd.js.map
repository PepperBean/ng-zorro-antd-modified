{"version":3,"file":"ng-zorro-antd-avatar.umd.js.map","sources":["ng://ng-zorro-antd/avatar/nz-avatar.component.ts","ng://ng-zorro-antd/avatar/nz-avatar.module.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnChanges,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\nimport { NzSizeLDSType, NzSizeMap, NzUpdateHostClassService } from 'ng-zorro-antd/core';\r\n\r\nexport type NzAvatarShape = 'square' | 'circle';\r\nexport type NzAvatarSize = NzSizeLDSType | number;\r\n\r\nexport interface NzAvatarSizeMap {\r\n  [size: string]: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'nz-avatar',\r\n  exportAs: 'nzAvatar',\r\n  templateUrl: './nz-avatar.component.html',\r\n  providers: [NzUpdateHostClassService],\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class NzAvatarComponent implements OnChanges {\r\n  @Input() nzShape: NzAvatarShape = 'circle';\r\n  @Input() nzSize: NzAvatarSize = 'default';\r\n  @Input() nzText: string;\r\n  @Input() nzSrc: string;\r\n  @Input() nzIcon: string;\r\n\r\n  oldAPIIcon = true; // Make the user defined icon compatible to old API. Should be removed in 2.0.\r\n  hasText: boolean = false;\r\n  hasSrc: boolean = true;\r\n  hasIcon: boolean = false;\r\n  textStyles: {};\r\n\r\n  @ViewChild('textEl') textEl: ElementRef;\r\n\r\n  private el: HTMLElement = this.elementRef.nativeElement;\r\n  private prefixCls = 'ant-avatar';\r\n  private sizeMap: NzSizeMap = { large: 'lg', small: 'sm' };\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private cd: ChangeDetectorRef,\r\n    private updateHostClassService: NzUpdateHostClassService,\r\n    private renderer: Renderer2,\r\n    private platform: Platform\r\n  ) {}\r\n\r\n  setClass(): this {\r\n    const classMap = {\r\n      [this.prefixCls]: true,\r\n      [`${this.prefixCls}-${this.sizeMap[this.nzSize]}`]: this.sizeMap[this.nzSize],\r\n      [`${this.prefixCls}-${this.nzShape}`]: this.nzShape,\r\n      [`${this.prefixCls}-icon`]: this.nzIcon,\r\n      [`${this.prefixCls}-image`]: this.hasSrc // downgrade after image error\r\n    };\r\n    this.updateHostClassService.updateHostClass(this.el, classMap);\r\n    this.cd.detectChanges();\r\n    return this;\r\n  }\r\n\r\n  imgError(): void {\r\n    this.hasSrc = false;\r\n    this.hasIcon = false;\r\n    this.hasText = false;\r\n    if (this.nzIcon) {\r\n      this.hasIcon = true;\r\n    } else if (this.nzText) {\r\n      this.hasText = true;\r\n    }\r\n    this.setClass().notifyCalc();\r\n    this.setSizeStyle();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.hasOwnProperty('nzIcon') && changes.nzIcon.currentValue) {\r\n      this.oldAPIIcon = changes.nzIcon.currentValue.indexOf('anticon') > -1;\r\n    }\r\n    this.hasText = !this.nzSrc && !!this.nzText;\r\n    this.hasIcon = !this.nzSrc && !!this.nzIcon;\r\n    this.hasSrc = !!this.nzSrc;\r\n\r\n    this.setClass().notifyCalc();\r\n    this.setSizeStyle();\r\n  }\r\n\r\n  private calcStringSize(): void {\r\n    if (!this.hasText) {\r\n      return;\r\n    }\r\n\r\n    const childrenWidth = this.textEl.nativeElement.offsetWidth;\r\n    const avatarWidth = this.el.getBoundingClientRect().width;\r\n    const scale = avatarWidth - 8 < childrenWidth ? (avatarWidth - 8) / childrenWidth : 1;\r\n    this.textStyles = {\r\n      transform: `scale(${scale}) translateX(-50%)`\r\n    };\r\n    if (typeof this.nzSize === 'number') {\r\n      Object.assign(this.textStyles, {\r\n        lineHeight: `${this.nzSize}px`\r\n      });\r\n    }\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  private notifyCalc(): this {\r\n    // If use ngAfterViewChecked, always demands more computations, so......\r\n    if (this.platform.isBrowser) {\r\n      setTimeout(() => {\r\n        this.calcStringSize();\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  private setSizeStyle(): void {\r\n    if (typeof this.nzSize === 'string') {\r\n      return;\r\n    }\r\n    this.renderer.setStyle(this.el, 'width', `${this.nzSize}px`);\r\n    this.renderer.setStyle(this.el, 'height', `${this.nzSize}px`);\r\n    this.renderer.setStyle(this.el, 'line-height', `${this.nzSize}px`);\r\n    if (this.hasIcon) {\r\n      this.renderer.setStyle(this.el, 'font-size', `${this.nzSize / 2}px`);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Alibaba.com All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\r\n */\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\n\r\nimport { NzAvatarComponent } from './nz-avatar.component';\r\n\r\n@NgModule({\r\n  declarations: [NzAvatarComponent],\r\n  exports: [NzAvatarComponent],\r\n  imports: [CommonModule, NzIconModule]\r\n})\r\nexport class NzAvatarModule {}\r\n"],"names":["platform","Component","NzUpdateHostClassService","ChangeDetectionStrategy","ViewEncapsulation","ElementRef","ChangeDetectorRef","Renderer2","Platform","Input","ViewChild","NgModule","CommonModule","NzIconModule"],"mappings":";;;;;;;;;;;QA2DE,2BACU,UAAsB,EACtB,EAAqB,EACrB,sBAAgD,EAChD,QAAmB,EACnBA,WAAkB;YAJlB,eAAU,GAAV,UAAU,CAAY;YACtB,OAAE,GAAF,EAAE,CAAmB;YACrB,2BAAsB,GAAtB,sBAAsB,CAA0B;YAChD,aAAQ,GAAR,QAAQ,CAAW;YACnB,aAAQ,GAARA,WAAQ,CAAU;YAvBnB,YAAO,GAAkB,QAAQ,CAAC;YAClC,WAAM,GAAiB,SAAS,CAAC;YAK1C,eAAU,GAAG,IAAI,CAAC;;YAClB,YAAO,GAAY,KAAK,CAAC;YACzB,WAAM,GAAY,IAAI,CAAC;YACvB,YAAO,GAAY,KAAK,CAAC;YAKjB,OAAE,GAAgB,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;YAChD,cAAS,GAAG,YAAY,CAAC;YACzB,YAAO,GAAc,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;SAQtD;;;;;;QAEJ,oCAAQ;;;;;YAAR;;;oBACQ,QAAQ;oBACZ,GAAC,mBAAA,IAAI,GAAC,SAAS,IAAG,IAAI;oBACtB,GAAI,mBAAA,IAAI,GAAC,SAAS,SAAI,mBAAA,IAAI,GAAC,OAAO,CAAC,mBAAA,IAAI,GAAC,MAAM,CAAG,IAAG,mBAAA,IAAI,GAAC,OAAO,CAAC,mBAAA,IAAI,GAAC,MAAM,CAAC;oBAC7E,GAAI,mBAAA,IAAI,GAAC,SAAS,SAAI,mBAAA,IAAI,GAAC,OAAS,IAAG,mBAAA,IAAI,GAAC,OAAO;oBACnD,GAAI,mBAAA,IAAI,GAAC,SAAS,UAAO,IAAG,mBAAA,IAAI,GAAC,MAAM;oBACvC,GAAI,mBAAA,IAAI,GAAC,SAAS,WAAQ,IAAG,mBAAA,IAAI,GAAC,MAAM;;2BACzC;gBACD,mBAAA,IAAI,GAAC,sBAAsB,CAAC,eAAe,CAAC,mBAAA,IAAI,GAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;gBAC/D,mBAAA,IAAI,GAAC,EAAE,CAAC,aAAa,EAAE,CAAC;gBACxB,0BAAO,IAAI,GAAC;aACb;;;;QAED,oCAAQ;;;YAAR;gBACE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,IAAI,CAAC,MAAM,EAAE;oBACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;iBACrB;qBAAM,IAAI,IAAI,CAAC,MAAM,EAAE;oBACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;iBACrB;gBACD,IAAI,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;gBAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;aACrB;;;;;QAED,uCAAW;;;;YAAX,UAAY,OAAsB;gBAChC,IAAI,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,MAAM,CAAC,YAAY,EAAE;oBACnE,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;iBACvE;gBACD,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC5C,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;gBAC5C,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;gBAE3B,IAAI,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;gBAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;aACrB;;;;;QAEO,0CAAc;;;;YAAtB;gBACE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;oBACjB,OAAO;iBACR;;oBAEK,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW;;oBACrD,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC,KAAK;;oBACnD,KAAK,GAAG,WAAW,GAAG,CAAC,GAAG,aAAa,GAAG,CAAC,WAAW,GAAG,CAAC,IAAI,aAAa,GAAG,CAAC;gBACrF,IAAI,CAAC,UAAU,GAAG;oBAChB,SAAS,EAAE,WAAS,KAAK,uBAAoB;iBAC9C,CAAC;gBACF,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,EAAE;oBACnC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE;wBAC7B,UAAU,EAAK,IAAI,CAAC,MAAM,OAAI;qBAC/B,CAAC,CAAC;iBACJ;gBACD,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;aACzB;;;;;;;QAEO,sCAAU;;;;;;YAAlB;gBAAA,iBAQC;;gBANC,IAAI,mBAAA,IAAI,GAAC,QAAQ,CAAC,SAAS,EAAE;oBAC3B,UAAU;;uBAAC;wBACT,mBAAA,KAAI,GAAC,cAAc,EAAE,CAAC;qBACvB,EAAC,CAAC;iBACJ;gBACD,0BAAO,IAAI,GAAC;aACb;;;;;QAEO,wCAAY;;;;YAApB;gBACE,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,EAAE;oBACnC,OAAO;iBACR;gBACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,EAAK,IAAI,CAAC,MAAM,OAAI,CAAC,CAAC;gBAC7D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,QAAQ,EAAK,IAAI,CAAC,MAAM,OAAI,CAAC,CAAC;gBAC9D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,aAAa,EAAK,IAAI,CAAC,MAAM,OAAI,CAAC,CAAC;gBACnE,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,WAAW,EAAK,IAAI,CAAC,MAAM,GAAG,CAAC,OAAI,CAAC,CAAC;iBACtE;aACF;;oBAjHFC,gBAAS,SAAC;wBACT,QAAQ,EAAE,WAAW;wBACrB,QAAQ,EAAE,UAAU;wBACpB,4TAAyC;wBACzC,SAAS,EAAE,CAACC,6BAAwB,CAAC;wBACrC,mBAAmB,EAAE,KAAK;wBAC1B,eAAe,EAAEC,8BAAuB,CAAC,MAAM;wBAC/C,aAAa,EAAEC,wBAAiB,CAAC,IAAI;qBACtC;;;;;wBA1BCC,iBAAU;wBAFVC,wBAAiB;wBAWgBJ,6BAAwB;wBANzDK,gBAAS;wBARFC,iBAAQ;;;;8BAiCdC,YAAK;6BACLA,YAAK;6BACLA,YAAK;4BACLA,YAAK;6BACLA,YAAK;6BAQLC,gBAAS,SAAC,QAAQ;;QA4FrB,wBAAC;KAlHD;;;;;;;QCjBA;SAK8B;;oBAL7BC,eAAQ,SAAC;wBACR,YAAY,EAAE,CAAC,iBAAiB,CAAC;wBACjC,OAAO,EAAE,CAAC,iBAAiB,CAAC;wBAC5B,OAAO,EAAE,CAACC,mBAAY,EAAEC,iBAAY,CAAC;qBACtC;;QAC4B,qBAAC;KAL9B;;;;;;;;;;;;;;;;;;;;;;;"}
